<div class="flex">
<div>
<div #mudMenu [style.width.px]='v.ref_width'><app-mudmenu [connected]="v.connected" [scrollLock]="v.scrollLock" [mud_id]="mudc_id"  [mud_name]="cfg.mudname" (menuAction)="menuAction($event)"></app-mudmenu></div>
<div class='mud-heigth'>
<div class="above-scroller" *ngIf='v.sizeCalculated2' #scroller (scroll)="scroll()" [style.width.px]='v.ref_width'>
    <div class="scroller" [style.min-width.px]='mudBlock.nativeElement.scrollWidth'></div>
</div>
<div class="mud-test" #mudTest *ngIf='!v.sizeCalculated'>
  12345678901234567890123456789012345678901234567890123456789012345678901234567890<br/>
  00000000011111111112222222222333333333344444444445555555555666666666677777777778<br/>
  12345678901234567890123456789012345678901234567890123456789012345678901234567890<br/>
  00000000011111111112222222222333333333344444444445555555555666666666677777777778<br/>
  12345678901234567890123456789012345678901234567890123456789012345678901234567890<br/>
  00000000011111111112222222222333333333344444444445555555555666666666677777777778<br/>
  12345678901234567890123456789012345678901234567890123456789012345678901234567890<br/>
  00000000011111111112222222222333333333344444444445555555555666666666677777777778<br/>
  12345678901234567890123456789012345678901234567890123456789012345678901234567890<br/>
  00000000011111111112222222222333333333344444444445555555555666666666677777777778<br/>
  12345678901234567890123456789012345678901234567890123456789012345678901234567890<br/>
  00000000011111111112222222222333333333344444444445555555555666666666677777777778<br/>
  12345678901234567890123456789012345678901234567890123456789012345678901234567890<br/>
  00000000011111111112222222222333333333344444444445555555555666666666677777777778<br/>
  12345678901234567890123456789012345678901234567890123456789012345678901234567890<br/>
  00000000011111111112222222222333333333344444444445555555555666666666677777777778<br/>
  12345678901234567890123456789012345678901234567890123456789012345678901234567890<br/>
  00000000011111111112222222222333333333344444444445555555555666666666677777777778<br/>
  12345678901234567890123456789012345678901234567890123456789012345678901234567890<br/>
  00000000011111111112222222222333333333344444444445555555555666666666677777777778<br/>
  12345678901234567890123456789012345678901234567890123456789012345678901234567890<br/>
  00000000011111111112222222222333333333344444444445555555555666666666677777777778<br/>
  12345678901234567890123456789012345678901234567890123456789012345678901234567890<br/>
</div>

<div class="mud-block doselect" #mudBlock *ngIf='v.sizeCalculated' [style.width.px]='v.ref_width' [style.height.px]='v.ref_height' [style.background-color]="v.stdbg" [style.color]="v.stdfg">
  <div class="mud-message" display="inline" *ngFor="let a2hMudline of mudlines"><app-mudspan [colorOff]='cs.colorOff' [blackToWhite]='cs.blackOnWhite' [invertFlag]="cs.invert" [ansi2html]="a2hMudline" [localEchoColor]="cs.localEchoColor" [localEchoBackground]="cs.localEchoBackground" [localEchoActive]="cs.localEchoActive"></app-mudspan></div>
</div>
</div>
<textarea pFocusTrap [pAutoFocus]="true" pInputTextarea *ngIf="v.inpType==='text'" (focus)="focusFunction('area')" (focusout)="focusOutFunction('area')" class="mud-input" [style.width.px]='v.ref_width' #mudInputArea (keydown)="onKeyDown($event)" (keyup)="onKeyUp($event)" [(ngModel)]="inpmessage"></textarea>
<input pFocusTrap [pAutoFocus]="true" pInputText *ngIf="v.inpType!=='text'" [(type)]="v.inpType" (focus)="focusFunction('line')" (focusout)="focusOutFunction('line')" class="mud-input" [style.width.px]='v.ref_width' #mudInputLine (keydown.enter)="sendMessage()" [(ngModel)]="inpmessage" />
</div><p-divider layout="vertical"></p-divider>
   <app-inventory [inv]="invlist" [vheight]='v.ref_height'></app-inventory>
</div>